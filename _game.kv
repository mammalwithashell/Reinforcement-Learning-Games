<GameButton@ToggleButton>:
    group: "game"

<MatchButton@ToggleButton>:
    group: "match"

<DifficultyButton@ToggleButton>:
    group: "difficulty"
    


<TitleScreen>
    id: title_screen
    GridLayout:
        cols: 1
        Label: 
            id: game_label
            text: "Games"
        GridLayout:
            cols: 3
            GameButton:
                id: ttt
                text: "Tic-Tac-Toe"
                on_press: title_screen.game_choice = "" if self.state == "normal" else self.text
            GameButton:
                id: c4
                text: "Connect 4"
                on_press: title_screen.game_choice = "" if self.state == "normal" else self.text
            GameButton:
                id: db
                text: "Dots and Boxes"
                on_press: title_screen.game_choice = "" if self.state == "normal" else self.text
        Label: 
            id: match_label
            text: "Match Type"
        GridLayout:
            cols: 2
            MatchButton:
                text: "Single Match"
                on_press: title_screen.match_style = "" if self.state == "normal" else self.text
            MatchButton:
                text: "League Match"
                on_press: title_screen.match_style = "" if self.state == "normal" else self.text

        Label:
            id: diff
            text: "Difficulty"
        GridLayout:
            cols: 3
            DifficultyButton: 
                text: "Easy"
                on_press: title_screen.diff_choice = "" if self.state == "normal" else self.text
            DifficultyButton: 
                text: "Medium"
                on_press: title_screen.diff_choice = "" if self.state == "normal" else self.text
            DifficultyButton: 
                text: "Hard"
                on_press: title_screen.diff_choice = "" if self.state == "normal" else self.text
        Button:
            text: "Play Game"
            on_press: root.load_game()
<RootWidget>:
    TitleScreen:
        name: "title"
    TicTacToeScreen:
        name: "Tic-Tac-Toe"
    Connect4Screen:
        name: "Connect 4"
    DotsAndBoxesScreen:
        name: "Dots and Boxes"


<Connect4Screen>
    id: title_screen
    board_grid: board_grid
    button_one: button_one
    button_two: button_two
    button_three: button_three
    button_four: button_four
    button_five: button_five
    scoreboard: scoreboard
    user_data: user_data
    ai_data: ai_data
    GridLayout:
        cols: 1
        GridLayout:
            cols: 5
            size_hint_y: None
            height: 200
            Button:
                id: button_one
                on_press: root.place_piece(0)
            Button:
                id: button_two
                on_press: root.place_piece(1)
            Button:
                id: button_three
                on_press: root.place_piece(2)
            Button:
                id: button_four
                on_press: root.place_piece(3)
            Button:
                id: button_five
                on_press: root.place_piece(4)
        GridLayout:
            id: board_grid
            cols: 5
        GridLayout:
            id: scoreboard
            cols: 2
            Label:
                id: user_data
                text: "Left side"
            Label:
                id: ai_data
                text: "Right side"


#:set dot_size 30
#:set dot_right_bound .85
#:set dot_left_bound .15



<DotsAndBoxesScreen>:
    id: d&b_screen
    game_grid: game_grid

    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            size_hint_y: None
            height: 100
            Button:
                text: "Menu"
                on_press: root.menu()
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: "Difficulty Setting: " + root.difficulty_setting
                Label:
                    text: "Your Score: " + str(root.score)
                Label:
                    text: "AI Score: " + str(root.ai_score)
                Label:
                    text: "Your Piece is " + root.piece
            Button:
                text: "Restart Game"
                on_press: root.restart()
        RelativeLayout:
            id: game_grid
            canvas:
                Ellipse:
                    group: "dot0"
                    pos: int(game_grid.width * dot_left_bound)-dot_size, int(game_grid.height * dot_left_bound)-dot_size
                    size: dot_size, dot_size
                Ellipse:
                    group: "dot1"
                    pos: int(game_grid.width / 2)-dot_size, int(game_grid.height * dot_left_bound)-dot_size
                    size: dot_size, dot_size
                Ellipse:
                    group: "dot2"
                    pos: int(game_grid.width * dot_right_bound)-dot_size, int(game_grid.height * dot_left_bound)-dot_size
                    size: dot_size, dot_size
                Ellipse:
                    group: "dot3"
                    pos: int(game_grid.width * dot_left_bound)-dot_size, int(game_grid.height /2)-dot_size
                    size: dot_size, dot_size
                Ellipse:
                    group: "dot4"
                    pos: int(game_grid.width / 2)-dot_size, int(game_grid.height /2)-dot_size
                    size: dot_size, dot_size
                Ellipse:
                    group: "dot5"
                    pos: int(game_grid.width * dot_right_bound)-dot_size, int(game_grid.height /2)-dot_size
                    size: dot_size, dot_size
                Ellipse:
                    group: "dot6"
                    pos: int(game_grid.width * dot_left_bound)-dot_size, int(game_grid.height * dot_right_bound)-dot_size
                    size: dot_size, dot_size
                Ellipse:
                    group: "dot7"
                    pos: int(game_grid.width / 2)-dot_size, int(game_grid.height * dot_right_bound)-dot_size
                    size: dot_size, dot_size
                Ellipse:
                    group: "dot8"
                    pos: int(game_grid.width * dot_right_bound)-dot_size, int(game_grid.height * dot_right_bound)-dot_size
                    size: dot_size, dot_size


<TicTacToeScreen>:
    canvas.before:
        # used to set the background color
        Color:
            rgba: (0,1,1,1)
        Ellipse:
            pos: 100, 100
            size: 200, 201
            angle_start: 0
            angle_end: 360
    FloatLayout:
        canvas:
            Color:
                rgba: 1, 0, 0, 1
            Line:
                # x1, y1, x2, y2
                points: 50, 50, 50, 1000
                width: 2
            Color:
                rgba: 50, 0, 0, 1
            Line:
                points: 100, 50, 100, 1000
                width: 2

